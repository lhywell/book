# web地图

@(笔记)[百度地图|高德地图|坐标系转换]

-------------------

[TOC]

## web端地图坐标系转换（涉及到百度，高德，WGS84，GCJ02）

> 首先说下经纬度，在工作中经常有同事搞混经纬度，调用方法的时候也经常写反，再加上一大堆坐标系，导致后续工作混乱
经度(Lng)：116.397428，在中国是经度大于维度
维度（Lat）:39.90923

注意：
国家测绘局规定，中国互联网地图必须使用至少加密一次的GCJ-02坐标。故高德不提供任何坐标系转换为GPS坐标的接口，请知晓。

### 百度API 
以下两种分别是JavaScript API 和 Android地图SDK API，说到的坐标系方面的知识，都是大同小异的，可以总结如下：

http://lbsyun.baidu.com/index.php?title=jspopular/guide/coorinfo

http://lbsyun.baidu.com/index.php?title=androidsdk/guide/tool/coordinate

坐标知识介绍
国内主流坐标系类型
主要有以下三种
1. WGS84：为一种大地坐标系，也是目前广泛使用的GPS全球卫星定位系统使用的坐标系；简称（WGS84坐标）
2. GCJ02：是由中国国家测绘局制订的地理信息系统的坐标系统，是由WGS84坐标系经加密后的坐标系；简称（国测局坐标）
3. BD09：百度坐标系，在GCJ02坐标系基础上再次加密。其中BD09ll表示百度经纬度坐标，BD09mc表示百度墨卡托米制坐标。简称（百度坐标）
在海外地区，统一使用WGS84坐标。开发者在使用百度地图相关服务时，请注意选择

百度提供的官方方法是Convertor构造函数，里面有一个translate方法，提供了from,to参数，意思就是从一个坐标系转到另一个坐标系，其中from，to的定义如下

https://github.com/lhywell/book/blob/master/map/map0001.png

其中，3代表google,soso地图、aliyun地图、mapabc地图和amap地图所用坐标，国测局坐标，看来百度对坐标的转换是把这几种归为一类，其实google坐标系是wgs84坐标，国测局是国测局坐标，两个压根不是一个东西，这种转换可能考虑到国家安全的层面，所以在转换上比较简单粗暴。

https://github.com/lhywell/book/blob/master/map/map0002.png

### 高德API
关于高德坐标转换，有各种问题请参考

http://lbs.amap.com/faq/web/javascript-api?wd=%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2&cateId=&page=

转换方法参考：

http://lbsbbs.amap.com/forum.php?mod=viewthread&tid=724&extra=page%3D1

http://lbs.amap.com/api/javascript-api/reference/lnglat-to-address/#m_AMap.convertFrom

高德只提供了以下3种坐标转换到高德

gps:GPS原始坐标；
baidu：百度经纬度；
mapbar：图吧经纬度；

https://github.com/lhywell/book/blob/master/map/map0003.png

坐标系是纬度在前，经度在后，请复制到文本框中，点击转换按钮：

41.80343182084754,123.41714737149174;41.802469398770086,123.41638531717835;41.80069675718447,123.41498506836558;41.802648707294054,123.4104020648181;41.80322861725963,123.40904669614183;41.80324582365427,123.40891115050668;41.80334960825875,123.40807768593105;41.803565422466704,123.40715106887217;41.80412851276868,123.40564363017187;41.805016774641985,123.40353147891388;41.80521765304824,123.40369015772382;41.805395191162916,123.4038286179092;41.80562822631518,123.4040215787217;41.805884654720195,123.40423974280857;41.80612500384948,123.40448396673166;41.80635944402792,123.40473316917259;41.806619488186776,123.40506588617275;41.807030234197725,123.40566247109726;41.80724614854405,123.40599694151764;41.80753730988586,123.40640700101658;41.80778298422714,123.40675454188873;41.80817678424865,123.40729141906723;41.809424709153085,123.40908134285336;41.80981842076106,123.4097794243241;41.8101521720863,123.41038279510083;41.810197948424594,123.41046424158682;41.810324585244445,123.41069147186198;41.81061221723221,123.41120217304172;41.81097186296762,123.41190967394103;41.811467449481796,123.41294741600629;41.81152590539484,123.4130920263635;41.811541493157,123.4131311899679;41.81164289872959,123.4133792184278;41.81198362733205,123.41422053888884;41.81240397876193,123.4153615713019;41.81261148017342,123.41598354160976;41.81266440064208,123.41614202172896;41.81267616067534,123.41617812944074;41.812726168755646,123.4163285746349;41.81274284760333,123.41637771877996;41.81296079031442,123.41705059062907;41.81318209490555,123.41776438484028;41.813415768307685,123.41853310455274;41.81348589474055,123.41876457981185;41.813546163787215,123.4189820020356;41.813678661633084,123.41943483370795;41.81385518839775,123.42021703967302;41.814031370059745,123.421155162196;41.81420940800258,123.422060954938;41.814253564769636,123.42229310929221;41.81364835935844,123.42235954616092;41.81276217927457,123.42225740387846;41.81189638729916,123.42202795582962;41.81111052516046,123.42170333034781;41.81071784151908,123.4215354222985;41.809940909922325,123.4212104511718;41.80767717208085,123.42026037004436;41.807467693864886,123.42013957714698;41.80727013185864,123.41999377271311;41.80640540400433,123.41938006025785;41.80552989439005,123.41870685408315;41.804009892820716,123.41758575717928;41.80343182084754,123.41714737149174