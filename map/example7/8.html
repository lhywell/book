<!DOCTYPE html>
<html>
<head>
	<title>地图API－范例－覆盖物事件</title>
	<meta charset="UTF-8" />
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta tabindex="">
	<link rel="stylesheet" type="text/css" href="http://demo.ishowchina.com/apidemos/sourceLinks/style.css" />
	<script type="text/javascript" src="http://api.ishowchina.com/v4/webapi/js/auth?v=3.6.3&t=jsmap&ak=ec85d3648154874552835438ac6a02b2"></script>
	
</head>
<body>
	<div id="map"  class="map_contaner"></div>
	<div id="pannel" class="contro_panel contro_panel_position_lr contro_panel_height">
		覆盖物已绑定了click事件，请点击覆盖物查看效果:)
	</div>  
    <script type="text/javascript">
	    var map, vectors=[];
	    function initMap(){
	       	map=new IMAP.Map("map", {
				minZoom:4,//最小地图级别
				maxZoom:18,//最大地图级别
				zoom:12,//初始化级别
				center:new IMAP.LngLat(116.40976,39.90131)//中心点坐标
	        });
	        
	        addOverlay();
	    }
	  	//添加覆盖物
	    function addOverlay() {
	    	if(map){
	    		var opts=new IMAP.MarkerOptions();
				opts.anchor = IMAP.Constants.BOTTOM_CENTER;
				opts.icon=new IMAP.Icon("http://demo.ishowchina.com/apidemos/sourceLinks/marker.png",{"size":new IMAP.Size(20, 29)});

				var marker=new IMAP.Marker(new IMAP.LngLat(116.40976,39.90131), opts);
				marker.addEventListener(IMAP.Constants.CLICK, function(event){
		        	alert("您点击的覆盖物是点标记!")
		        }, marker);

				var path='116.38504400000001,39.890383;116.398262,39.878136000000005;116.403411,39.889461000000004'.split(";");
				var lineLnglats  = [],lnglat;
				for(var i=0,len = path.length;i<len;i++){
					lnglat= path[i].split(",");
					lineLnglats.push(new IMAP.LngLat(lnglat[0],lnglat[1]));
				}
	    		var polyline=new IMAP.Polyline(lineLnglats, {"strokeOpacity" : 1});
				polyline.addEventListener(IMAP.Constants.CLICK, function(event){
					alert("您点击的覆盖物是折线!")
				}, polyline);
				path='116.41946200000001,39.897215;116.426843,39.874515;116.405986,39.868325000000006'.split(";");
				var polygonLnglats  = [];
				for(var i=0,len = path.length;i<len;i++){
					lnglat= path[i].split(",");
					polygonLnglats.push(new IMAP.LngLat(lnglat[0],lnglat[1]));
				}
	    		var polygon=new IMAP.Polygon(polygonLnglats, {"strokeOpacity" : 1});
	    		polygon.addEventListener(IMAP.Constants.CLICK, function(event){
		        	alert("您点击的覆盖物是多边形!")
		        }, polygon);
	    		vectors.push(marker);
	    		vectors.push(polyline);
	    		vectors.push(polygon);
	    		map.getOverlayLayer().addOverlays(vectors, true);
			}
	    }
    	initMap();    
    </script>
</body>
</html>