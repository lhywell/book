<!DOCTYPE html>
<html>

<head>
    <title>地图API－范例－基础地图展示</title>
    <meta charset="UTF-8" />
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta tabindex="">
    <link rel="stylesheet" type="text/css" href="http://demo.ishowchina.com/apidemos/sourceLinks/style.css" />
    <script type="text/javascript" src="http://api.ishowchina.com/v4/webapi/js/auth?v=3.6.3&t=jsmap&ak=ec85d3648154874552835438ac6a02b2"></script>
    <script src="http://public.ishowchina.com/js/jquery-1.11.3.min.js"></script>
</head>

<body>
    <div id="map" class="map_contaner"></div>
    <script type="text/javascript">
    var map;

    function initMap() {
        map = new IMAP.Map("map", {
            minZoom: 4, //最小地图级别
            maxZoom: 18, //最大地图级别
            zoom: 12, //初始化级别
            center: new IMAP.LngLat(116.40976, 39.90131) //中心点坐标
        });
        map.addEventListener(IMAP.Constants.CLICK, function(evtObj) {
            clearReaults();

            addMarker(evtObj.lnglat);
            addNine(evtObj.lnglat);
        });
    }


    var zong = 0.01; //纵坐标
    var heng = 0.008; //横坐标
    var fillColor = "#abc9f5"; //填充颜色
    var fillOpacity = "0.2"; //填充透明度
    var strokeColor = "#74aafa"; //边框颜色
    var strokeOpacity = "1"; //边框透明度
    var strokeWeight = "1"; //边框宽度
    var editabled = false; //可编辑
    var strokeStyle = IMAP.Constants.OVERLAY_LINE_SOLID; //边框风格 OVERLAY_LINE_DASHED||OVERLAY_LINE_SOLID

    // 添加自定义覆盖物   
    function addNine(position) {
        addNine0(position);
        addNine1(position);
        addNine2(position);
        addNine3(position);
        addNine4(position);
        addNine5(position);
        addNine6(position);
        addNine7(position);
        addNine8(position);
    }

    function addNine0(position) {
        var lnglatarr = [];
        //双三角图形
        // lnglatarr.push(new IMAP.LngLat(position.lng-0.02, position.lat+0.01));
        // lnglatarr.push(new IMAP.LngLat(position.lng+0.02, position.lat+0.01));
        // lnglatarr.push(new IMAP.LngLat(position.lng-0.02, position.lat-0.01));
        // lnglatarr.push(new IMAP.LngLat(position.lng+0.02, position.lat-0.01));
        //矩形
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat + heng));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat + heng));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat - heng));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat - heng));

        var pgo = new IMAP.PolygonOptions();
        pgo.fillColor = fillColor;
        pgo.fillOpacity = fillOpacity;
        pgo.strokeColor = strokeColor;
        pgo.strokeOpacity = strokeOpacity;
        pgo.strokeWeight = strokeWeight;
        pgo.strokeStyle = strokeStyle;
        pgo.editabled = editabled;
        var polygon = new IMAP.Polygon(lnglatarr, pgo);
        map.getOverlayLayer().addOverlay(polygon, false);
    }

    function addNine1(position) {
        var lnglatarr = [];
        //矩形
        lnglatarr.push(new IMAP.LngLat(position.lng - zong * 3, position.lat + heng * 3));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat + heng * 3));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat + heng));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong * 3, position.lat + heng));

        var pgo = new IMAP.PolygonOptions();
        pgo.fillColor = fillColor;
        pgo.fillOpacity = fillOpacity;
        pgo.strokeColor = strokeColor;
        pgo.strokeOpacity = strokeOpacity;
        pgo.strokeWeight = strokeWeight;
        pgo.strokeStyle = strokeStyle;
        pgo.editabled = editabled;
        var polygon = new IMAP.Polygon(lnglatarr, pgo);
        polygon.addEventListener(IMAP.Constants.CLICK, function(event) {
            alert("您点击的覆盖物是多边形!")
        }, polygon);
        map.getOverlayLayer().addOverlay(polygon, false);
    }

    function addNine2(position) {
        var lnglatarr = [];
        //矩形
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat + heng * 3));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat + heng * 3));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat + heng));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat + heng));

        var pgo = new IMAP.PolygonOptions();
        pgo.fillColor = fillColor;
        pgo.fillOpacity = fillOpacity;
        pgo.strokeColor = strokeColor;
        pgo.strokeOpacity = strokeOpacity;
        pgo.strokeWeight = strokeWeight;
        pgo.strokeStyle = strokeStyle;
        pgo.editabled = editabled;
        var polygon = new IMAP.Polygon(lnglatarr, pgo);
        map.getOverlayLayer().addOverlay(polygon, false);
    }

    function addNine3(position) {
        var lnglatarr = [];
        //矩形
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat + heng * 3));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong * 3, position.lat + heng * 3));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong * 3, position.lat + heng));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat + heng));

        var pgo = new IMAP.PolygonOptions();
        pgo.fillColor = fillColor;
        pgo.fillOpacity = fillOpacity;
        pgo.strokeColor = strokeColor;
        pgo.strokeOpacity = strokeOpacity;
        pgo.strokeWeight = strokeWeight;
        pgo.strokeStyle = strokeStyle;
        pgo.editabled = editabled;
        var polygon = new IMAP.Polygon(lnglatarr, pgo);
        map.getOverlayLayer().addOverlay(polygon, false);
    }

    function addNine4(position) {
        var lnglatarr = [];
        //矩形
        lnglatarr.push(new IMAP.LngLat(position.lng - zong * 3, position.lat + heng));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat + heng));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat - heng));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong * 3, position.lat - heng));

        var pgo = new IMAP.PolygonOptions();
        pgo.fillColor = fillColor;
        pgo.fillOpacity = fillOpacity;
        pgo.strokeColor = strokeColor;
        pgo.strokeOpacity = strokeOpacity;
        pgo.strokeWeight = strokeWeight;
        pgo.strokeStyle = strokeStyle;
        pgo.editabled = editabled;
        var polygon = new IMAP.Polygon(lnglatarr, pgo);
        map.getOverlayLayer().addOverlay(polygon, false);
    }

    function addNine5(position) {
        var lnglatarr = [];
        //矩形
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat + heng));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong * 3, position.lat + heng));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong * 3, position.lat - heng));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat - heng));

        var pgo = new IMAP.PolygonOptions();
        pgo.fillColor = fillColor;
        pgo.fillOpacity = fillOpacity;
        pgo.strokeColor = strokeColor;
        pgo.strokeOpacity = strokeOpacity;
        pgo.strokeWeight = strokeWeight;
        pgo.strokeStyle = strokeStyle;
        pgo.editabled = editabled;
        var polygon = new IMAP.Polygon(lnglatarr, pgo);
        map.getOverlayLayer().addOverlay(polygon, false);
    }

    function addNine6(position) {
        var lnglatarr = [];
        //矩形
        lnglatarr.push(new IMAP.LngLat(position.lng - zong * 3, position.lat - heng));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat - heng));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat - heng * 3));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong * 3, position.lat - heng * 3));

        var pgo = new IMAP.PolygonOptions();
        pgo.fillColor = fillColor;
        pgo.fillOpacity = fillOpacity;
        pgo.strokeColor = strokeColor;
        pgo.strokeOpacity = strokeOpacity;
        pgo.strokeWeight = strokeWeight;
        pgo.strokeStyle = strokeStyle;
        pgo.editabled = editabled;
        var polygon = new IMAP.Polygon(lnglatarr, pgo);
        map.getOverlayLayer().addOverlay(polygon, false);
    }

    function addNine7(position) {
        var lnglatarr = [];
        //矩形
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat - heng));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat - heng));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat - heng * 3));
        lnglatarr.push(new IMAP.LngLat(position.lng - zong, position.lat - heng * 3));

        var pgo = new IMAP.PolygonOptions();
        pgo.fillColor = fillColor;
        pgo.fillOpacity = fillOpacity;
        pgo.strokeColor = strokeColor;
        pgo.strokeOpacity = strokeOpacity;
        pgo.strokeWeight = strokeWeight;
        pgo.strokeStyle = strokeStyle;
        pgo.editabled = editabled;
        var polygon = new IMAP.Polygon(lnglatarr, pgo);
        map.getOverlayLayer().addOverlay(polygon, false);
    }

    function addNine8(position) {
        var lnglatarr = [];
        //矩形
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat - heng));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong * 3, position.lat - heng));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong * 3, position.lat - heng * 3));
        lnglatarr.push(new IMAP.LngLat(position.lng + zong, position.lat - heng * 3));

        var pgo = new IMAP.PolygonOptions();
        pgo.fillColor = fillColor;
        pgo.fillOpacity = fillOpacity;
        pgo.strokeColor = strokeColor;
        pgo.strokeOpacity = strokeOpacity;
        pgo.strokeWeight = strokeWeight;
        pgo.strokeStyle = strokeStyle;
        pgo.editabled = editabled;
        var polygon = new IMAP.Polygon(lnglatarr, pgo);
        map.getOverlayLayer().addOverlay(polygon, false);
    }

    //添加标注
    function addMarker(position) {
        var marker = new IMAP.Marker(position, {
            pointType: IMAP.Constants.OVERLAY_MARKER_POINT,
            pointStrokeColor: "red",
            pointFillColor: "red"
        });
        map.getOverlayLayer().addOverlay(marker);
    }

    //清空结果
    function clearReaults() {
        if (map) {
            map.getOverlayLayer().clear();
        }
    }

    initMap();
    </script>
</body>

</html>